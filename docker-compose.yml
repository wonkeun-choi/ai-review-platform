version: '3.8'

services:
  gateway:
    build: ./apps/gateway
    ports:
      - "80:80" # 사용자는 80포트로만 접속
    depends_on:
      - web
      - review-engine

  web:
    build: ./apps/web
    # 포트는 gateway가 내부적으로 3000으로 연결

  review-engine:
    build: ./apps/review-engine
    env_file:
      - .env